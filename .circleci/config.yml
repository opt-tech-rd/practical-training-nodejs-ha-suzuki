version: '2.1'

orbs:
  gcp-cli: circleci/gcp-cli@3.2.1

commands:
  gcloud-authentication:
    steps:
      - gcp-cli/setup:
          gcloud_service_key: GCLOUD_SERVICE_KEY
          google_project_id: GOOGLE_PROJECT_ID

jobs:
  build:
    machine:
      image: ubuntu-2204:current
    resource_class: large
    steps:
      - run:
          name: Docker Build
          # working_directory: ~/github/opt-tech-tr/practical-training-nodejs-t-hrysdev/backend/
          command: ls ~/project
            # docker build -t node:22-slim .
      - gcloud-authentication
      - run:
          name: docker images
          command: docker images


workflows:
  install_and_configure_cli:
    jobs:
      - build
